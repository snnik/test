{"ast":null,"code":"import _defineProperty from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/snnik/IdeaProjects/blog_example/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import DataService from'../service/DataService';var PostComponent=/*#__PURE__*/function(_Component){_inherits(PostComponent,_Component);function PostComponent(props){var _this;_classCallCheck(this,PostComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(PostComponent).call(this,props));_this.state={id:_this.props.match.params.id,headline:'',tag:'',message:''};_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.backClick=_this.backClick.bind(_assertThisInitialized(_this));_this.deletePostClicked=_this.deletePostClicked.bind(_assertThisInitialized(_this));return _this;}_createClass(PostComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;DataService.retrievePost(this.state.id).then(function(response){return _this2.setState({id:response.data.id,headline:response.data.headline,tag:response.data.tag,message:response.data.message});});}},{key:\"handleChange\",value:function handleChange(event){var target=event.target;var value=target.value;var name=target.name;this.setState(_defineProperty({},name,value));}},{key:\"onSubmit\",value:function onSubmit(event){var _this3=this;var post={id:this.state.id,headline:this.state.headline,tag:this.state.tag,message:this.state.message};DataService.updatePost(this.state.id,post).then(function(){return _this3.props.history.push('/');});event.preventDefault();}},{key:\"backClick\",value:function backClick(){this.props.history.push('/');}},{key:\"deletePostClicked\",value:function deletePostClicked(id){var _this4=this;DataService.deletePost(id).then(function(response){_this4.setState({message:\"Delete \".concat(id)});_this4.props.history.push('/');});}},{key:\"render\",value:function render(){var _this5=this;//let { message, tag, headline, id } = this.state;\nconsole.log(this.state);return React.createElement(\"div\",{className:\"container\"},React.createElement(\"h3\",null,\"Post\"),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"container\"},React.createElement(\"form\",{onSubmit:this.onSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"\\u0422\\u044D\\u0433:\"),React.createElement(\"input\",{name:\"tag\",className:\"form-control\",type:\"text\",value:this.state.tag,onChange:this.handleChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A:\"),React.createElement(\"input\",{name:\"headline\",className:\"form-control\",type:\"text\",value:this.state.headline,onChange:this.handleChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435:\"),React.createElement(\"textarea\",{name:\"message\",className:\"form-control\",value:this.state.message,onChange:this.handleChange})),React.createElement(\"div\",{className:\"row\"},React.createElement(\"button\",{className:\"btn btn-success mx-2\",onClick:this.backClick},\"\\u041D\\u0430\\u0437\\u0430\\u0434\"),React.createElement(\"button\",{className:\"btn btn-warning float-right\",onClick:function onClick(){return _this5.deletePostClicked(_this5.state.id);}},\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"),React.createElement(\"input\",{className:\"btn btn-primary float-right mx-2\",type:\"submit\",value:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})))));}}]);return PostComponent;}(Component);export default PostComponent;","map":{"version":3,"sources":["/home/snnik/IdeaProjects/blog_example/frontend/src/component/PostComponent.jsx"],"names":["React","Component","DataService","PostComponent","props","state","id","match","params","headline","tag","message","onSubmit","bind","handleChange","backClick","deletePostClicked","retrievePost","then","response","setState","data","event","target","value","name","post","updatePost","history","push","preventDefault","deletePost","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DataService from '../service/DataService';\n\nclass PostComponent extends Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            id: this.props.match.params.id,\n            headline: '',\n            tag: '',\n            message: ''\n        };\n        this.onSubmit = this.onSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.backClick = this.backClick.bind(this);\n        this.deletePostClicked = this.deletePostClicked.bind(this);\n    }\n\n    componentDidMount(){\n        DataService.retrievePost(this.state.id)\n            .then(response => this.setState({\n                id: response.data.id,\n                headline: response.data.headline,\n                tag: response.data.tag,\n                message: response.data.message\n            }));\n    }\n\n    handleChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n        this.setState({[name]: value});\n      }\n\n    onSubmit(event){\n        let post = {\n            id: this.state.id,\n            headline: this.state.headline,\n            tag: this.state.tag,\n            message: this.state.message\n        }\n        DataService.updatePost(this.state.id, post)\n                .then(() => this.props.history.push('/'))\n\n        event.preventDefault();\n    }\n\n    backClick(){\n        this.props.history.push('/');\n    }\n\n    deletePostClicked(id) {\n        DataService.deletePost(id)\n            .then(\n                response => {\n                    this.setState({ message: `Delete ${id}` });\n                    this.props.history.push('/');\n                }\n            )\n    }\n\n    render() {\n        //let { message, tag, headline, id } = this.state;\n        console.log(this.state);\n        return (\n            <div className=\"container\">\n                <h3>Post</h3>\n                <br/>\n                <div className=\"container\">\n                    <form onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                            <label>\n                                Тэг:\n                            </label>\n                            <input name = \"tag\" className=\"form-control\" type=\"text\" value={this.state.tag} onChange={this.handleChange} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>\n                                Заголовок:\n                            </label>\n                            <input name = \"headline\" className=\"form-control\" type=\"text\" value={this.state.headline} onChange={this.handleChange} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>\n                                Сообщение:\n                            </label>\n                            <textarea name = \"message\" className=\"form-control\" value={this.state.message} onChange={this.handleChange} />\n                        </div>\n                        <div className=\"row\">\n                            <button className=\"btn btn-success mx-2\" onClick={this.backClick}>Назад</button>\n                            <button className=\"btn btn-warning float-right\" onClick={() => this.deletePostClicked(this.state.id)}>Удалить</button>\n                            <input className=\"btn btn-primary float-right mx-2\" type=\"submit\" value=\"Сохранить\" />\n                        </div>\n                    </form>\n                </div>\n                \n            </div>\n        );\n    }\n}\n\nexport default PostComponent;"]},"metadata":{},"sourceType":"module"}